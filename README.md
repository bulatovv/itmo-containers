# Лабораторная работа №3

## Ход работы

### Установка minikube и kubectl
Установил из официального репозитория для моего дистрибутива.
![](assets/2024-12-22-22-31-19.png)

Как и kubectl
![](assets/2024-12-22-22-32-39.png)


### Запуск minikube
![](assets/2024-12-22-22-35-51.png)

![](assets/2024-12-22-22-37-01.png)

![](assets/2024-12-22-22-53-37.png)

### Создание ресурсов
Создаем нужные конфигмапы, секреты, сервисы и деплои

![](assets/2024-12-22-22-59-46.png)

![](assets/2024-12-22-23-05-54.png)

![](assets/2024-12-22-23-08-19.png)

### Подключение извне

Запускаем туннель minikube

![](assets/2024-12-22-23-43-07.png)

![](assets/2024-12-22-23-53-52.png)

### Результаты

![](assets/2024-12-23-00-40-59.png)

### Дашборд

![](assets/2024-12-23-00-48-06.png)

## Вопросы
1. Порядок имеет значение, т.к деплои ссылаются на конфигмапы и секреты. Конфигмапы и секреты должны бысть созданы до деплоя.
2. Nextcloud отдает 500 ошибки так как у него нет подключения к базе данных. ~~Оно не восстанавливается, как как после --scale 1 postgres уже на новом поде с другим адресом,
   а nextcloud все еще стучится к старому. Если сделать ре-деплой у nextcloud то все заработает~~
   Nextcloud обращается не к поду, а к сервису, причем по его названию, а не по IP-адресу. Сервис уже перенапраляет трафик на под.
   Подключение не восстанавливается по каким-то внутренним причинам nextcloud.
   Еще при --scale 0 и обратно мы потеряем все данные в БД
